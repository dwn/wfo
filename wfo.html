<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Wfo</title>
<link rel="stylesheet" href="wfo.css">
</head>
<body>
<div id="prevSetArea" class="nav-area nav-left" title="Previous Set"></div>
<div id="nextSetArea" class="nav-area nav-right" title="Next Set"></div>
<div id="trashCan" class="trash-can" title="Drag cards here to delete">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M14 11V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</div>
<div id="copyButton" class="copy-button" title="Drag cards here to copy">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</div>
<div id="deleteModal" class="delete-modal" style="display: none;">
<div class="delete-modal-content">
<h3>Delete Card?</h3>
<div class="delete-modal-buttons">
<button id="confirmDelete" class="btn btn-danger">Delete</button>
<button id="cancelDelete" class="btn btn-secondary">Cancel</button>
</div>
</div>
</div>
<div id="cardEditorModal" class="card-editor-modal" style="display: none;">
<div class="card-editor-content">
<div class="card-editor-body">
<div class="editor-grid">
<div class="editor-controls">
<div class="editor-section accordion collapsed">
<div class="accordion-header" onclick="toggleAccordion(this)">
<h4>Card Settings</h4>
<span class="accordion-icon">▶</span>
</div>
<div class="accordion-content">
<div class="accordion-subsection">
<h5>Card Info</h5>
<div class="form-grid">
<div class="form-group">
<label for="editorOrder">Order</label>
<select id="editorOrder">
<option value="">Undefined</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
</select>
</div>
<div class="form-group">
<label for="editorPosition">Position</label>
<div id="editorPositionDisplay" class="position-display">Not set</div>
</div>
</div>
</div>
<div class="accordion-subsection">
<h5>Visual Options</h5>
<div class="form-grid">
<div class="form-group">
<label for="editorSize">Size <span id="editorSizeValue">8</span></label>
<input type="range" id="editorSize" min="2" max="40" value="5">
</div>
<div class="form-group">
<label for="editorBackground">Background</label>
<select id="editorBackground">
<option value="transparent">Transparent</option>
<option value="#700000">Crimson (#700000) - 736nm</option>
<option value="#B00000">Red (#B00000) - 695nm</option>
<option value="#DC0000">Scarlet (#DC0000) - 656nm</option>
<option value="#FF7B00">Orange (#FF7B00) - 619nm</option>
<option value="#FFF200">Yellow (#FFF200) - 584nm</option>
<option value="#A6FF00">Lime (#A6FF00) - 551nm</option>
<option value="#36FF00">Green (#36FF00) - 520nm</option>
<option value="#00FFF5">Cyan (#00FFF5) - 491nm</option>
<option value="#008EFF">Sky (#008EFF) - 464nm</option>
<option value="#0060FF">Blue (#0060FF) - 438nm</option>
<option value="#6600CC">Purple (#6600CC) - 413nm</option>
<option value="#4B0080">Violet (#4B0080) - 390nm</option>
<option value="#000000">Black (#000000) - 368nm</option>
<option value="#808080">Gray (#808080)</option>
<option value="#FFFFFF">White (#FFFFFF)</option>
</select>
</div>
<div class="form-group">
<label for="editorBackground2">Second Color (optional)</label>
<select id="editorBackground2">
<option value="">None</option>
<option value="transparent">Transparent</option>
<option value="#700000">Crimson (#700000) - 736nm</option>
<option value="#B00000">Red (#B00000) - 695nm</option>
<option value="#DC0000">Scarlet (#DC0000) - 656nm</option>
<option value="#FF7B00">Orange (#FF7B00) - 619nm</option>
<option value="#FFF200">Yellow (#FFF200) - 584nm</option>
<option value="#A6FF00">Lime (#A6FF00) - 551nm</option>
<option value="#36FF00">Green (#36FF00) - 520nm</option>
<option value="#00FFF5">Cyan (#00FFF5) - 491nm</option>
<option value="#008EFF">Sky (#008EFF) - 464nm</option>
<option value="#0060FF">Blue (#0060FF) - 438nm</option>
<option value="#6600CC">Purple (#6600CC) - 413nm</option>
<option value="#4B0080">Violet (#4B0080) - 390nm</option>
<option value="#000000">Black (#000000) - 368nm</option>
<option value="#808080">Gray (#808080)</option>
<option value="#FFFFFF">White (#FFFFFF)</option>
</select>
</div>
<div class="form-group">
<label>
<input type="checkbox" id="editorSvgColor"> SVG Color
</label>
</div>
</div>
</div>
<div class="accordion-subsection">
<h5>SVG Background</h5>
<div class="form-group">
<label for="editorSvg">SVG URL or Code</label>
<textarea id="editorSvg" placeholder="https://example.com/image.svg or paste SVG code directly" rows="3"></textarea>
</div>
<div id="editorSvgPreview" class="svg-preview" style="display: none;">
<div id="editorSvgPreviewContent"></div>
</div>
</div>
</div>
</div>
<div class="editor-section">
<h4>Rule</h4>
<div class="form-group">
<textarea id="editorRule" class="code-editor" placeholder="Enter rule code..." rows="4"></textarea>
</div>
</div>
<div class="editor-section">
<h4>Input</h4>
<div class="form-group">
<textarea id="editorInput" class="code-editor" placeholder="Enter input data..." rows="6"></textarea>
</div>
</div>
<div class="editor-section">
<h4>Output</h4>
<div class="form-group">
<textarea id="editorOutput" class="code-editor" readonly rows="6"></textarea>
</div>
</div>
</div>
<div class="editor-preview">
<div class="preview-header">
<h4>Preview</h4>
<div class="preview-controls">
<label>
<input type="checkbox" id="editorItalics" checked> Italics
</label>
<label>
<input type="checkbox" id="animatePreview"> Animate
</label>
</div>
</div>
<div class="preview-container">
<canvas id="editorCanvas" width="600" height="848"></canvas>
</div>
</div>
</div>
</div>
<div class="card-editor-footer">
  <div class="footer-left">
    <button id="showInstructions" class="btn btn-ghost" type="button">Instructions</button>
  </div>
  <div class="footer-actions">
    <button id="saveCard" class="btn btn-primary" type="button">Save Card</button>
    <button id="cancelEdit" class="btn btn-secondary" type="button">Cancel</button>
  </div>
</div>
</div>
</div>
<div id="instructionsModal" class="instructions-modal" style="display: none;">
  <div class="instructions-content" role="dialog" aria-modal="true" aria-labelledby="instructionsTitle">
    <div class="instructions-header">
      <h3 id="instructionsTitle">Digit Pair Instructions</h3>
    </div>
    <div class="instructions-body">
      <ul>
        <li><strong>Digit pairs drive drawing.</strong> Treat every two hexadecimal characters (for example <code>4F</code>) as a single command on the 8×8 grid.</li>
        <li><strong>Bit layout matters.</strong> The byte splits into <code>a xxx b yyy</code>; the three-bit values <code>xxx</code>/<code>yyy</code> set horizontal/vertical offsets. Values 0–4 move forward, 5–7 wrap to −1, −2, −3.</li>
        <li><strong>Command bits pick the stroke.</strong> The outer bits <code>a</code> and <code>b</code> (written together as <code>ab</code>) choose the action: <code>00</code> draws a straight line, <code>01</code> and <code>10</code> draw quarter arcs (vertical or horizontal bow), and <code>11</code> moves without drawing.</li>
        <li><strong>Zero moves are special.</strong> With no movement, <code>00</code> snaps to the row top, <code>01</code> plots a point, <code>10</code> draws a full circle, and <code>11</code> does nothing.</li>
        <li><strong>Layout helpers keep things tidy.</strong> Use <code>||</code> to start a new grid row, a single <code>|</code> to delimit successive glyphs, and prefix lines with <code>//</code> for comments that the renderer ignores.</li>
        <li><strong>Rules transform the raw data.</strong> Add replacements like <code>13,24</code> (source,target) to the Rule box; they apply before the glyphs are drawn.</li>
      </ul>
    </div>
    <div class="instructions-footer">
      <button id="ackInstructions" class="btn btn-primary" type="button">Got it</button>
    </div>
  </div>
</div>
<div id="status" style="display: none;">
<div class="spinner"></div>
</div>
<div id="individualCardView" class="individual-card-view">
<div class="individual-card" id="individualCard">
</div>
</div>
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="cards.js"></script>
<script src="draw.js"></script>
<script src="wfo.js"></script>
</body>
</html>