*{margin:0;padding:0;box-sizing:border-box}
body{background:#1a1a1a;color:#ffffff;font-family:system-ui,-apple-system,sans-serif;overflow:hidden;height:100vh;display:flex;flex-direction:column}
.nav-area{position:fixed;top:0;bottom:0;cursor:pointer;z-index:100;transition:background 0.2s ease}
.nav-left{left:0;right:calc(50% + (100vh * 3 / 7.07) / 2)}
.nav-right{left:calc(50% + (100vh * 3 / 7.07) / 2);right:0}
.nav-area:hover{background:rgba(255,255,255,0.05)}
.nav-area.disabled:hover{background:transparent}
.grid-container{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(5,1fr);gap:10px;width:100%;height:100%;max-width:calc(100vh * 3 / 7.07);max-height:100%;padding:10px;box-sizing:border-box;margin:0 auto}
.card-wrapper{width:100%;height:100%;border:none;border-radius:5%/3.5355339059%;overflow:hidden;position:relative;background:#333;cursor:grab;user-select:none;transition:all 0.2s ease;z-index:1;box-shadow:0 4px 16px rgba(0,0,0,0.5)}
.card-wrapper::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:5%/3.5355339059%;box-shadow:inset 0 1px 2.5px rgba(0,0,0,0.6),inset 0 -1px 2.5px rgba(255,255,255,0.2);pointer-events:none;z-index:5}
.card-wrapper:active{cursor:grabbing}
.card-wrapper.dragging{opacity:0.4}
.card-wrapper.drag-source{background:#2a2a2a;border-style:dashed;border-color:#888}
.card-wrapper.drag-source canvas,.card-wrapper.drag-source .svg-container,.card-wrapper.drag-source .card-order{visibility:hidden}
.card-wrapper.drag-over{border-color:#4CAF50;transform:scale(1.05);box-shadow:0 0 20px rgba(76,175,80,0.5)}
.card-wrapper.empty-slot{cursor:default;background:#2a2a2a;border:1px dashed #666;z-index:0}
.card-wrapper.empty-slot.drag-over{background:#3a3a3a;border-color:#4CAF50;cursor:grab}
.individual-card-view{display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);z-index:1000;justify-content:center;align-items:center}
.individual-card{width:75vw;max-width:500px;height:auto;aspect-ratio:1/1.41421356;background:#333;border:none;border-radius:5%/3.5355339059%;overflow:hidden;position:relative;box-shadow:0 8px 30px rgba(0,0,0,0.5),0 0 60px rgba(255,255,255,0.15);margin:20px;display:block}
.individual-card::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;border-radius:5%/3.5355339059%;box-shadow:inset 0 1px 4px rgba(0,0,0,0.6),inset 0 -1px 4px rgba(255,255,255,0.2);pointer-events:none;z-index:10}
.individual-card canvas{width:100%;height:100%;display:block;position:absolute;top:0;left:0;z-index:2}
.individual-card .svg-container{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}
.individual-card .svg-container svg{width:100%;height:100%;display:block;object-fit:contain;object-position:center;opacity:0.5}
.card-wrapper canvas{width:100%;height:100%;display:block;position:absolute;top:0;left:0;z-index:2}
.card-order{position:absolute;top:10px;right:10px;background:rgba(0,0,0,0.7);color:white;padding:4px 8px;border-radius:4px;font-size:14px;font-weight:bold;z-index:10;opacity:0;transition:opacity 0.2s ease}
.card-wrapper:hover .card-order{opacity:1}
.card-edit-button{position:absolute;top:10px;left:10px;background:rgba(0,0,0,0.7);border:none;border-radius:4px;padding:4px 8px;font-size:14px;cursor:pointer;z-index:10;opacity:0;transition:opacity 0.2s ease}
.card-wrapper:hover .card-edit-button{opacity:1}
.card-edit-button:hover{background:rgba(0,0,0,0.9);transform:scale(1.1)}
.card-wrapper .svg-container{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}
.svg-container{position:absolute;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none}
#status{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000}
.spinner{width:50px;height:50px;border:4px solid rgba(255,255,255,0.1);border-top-color:#fff;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.error{color:#ff6b6b;text-align:center;padding:1rem;flex:1;display:flex;align-items:center;justify-content:center}
#gridContainer{flex:1;overflow:auto}
.trash-can{position:fixed;top:20px;left:20px;width:calc(50% - (100vh * 3 / 7.07) / 2 - 30px);height:48px;background:#333;border:2px solid #666;border-radius:8px;display:none;align-items:center;justify-content:center;color:#888;cursor:pointer;z-index:200;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0,0,0,0.3)}
.trash-can.show{display:flex}
.trash-can:hover{background:#444;border-color:#888;color:#aaa}
.trash-can.drag-over{background:#ff4444;border-color:#ff6666;color:white;transform:scale(1.1);box-shadow:0 0 20px rgba(255,68,68,0.5)}
.copy-button{position:fixed;top:20px;right:20px;width:calc(50% - (100vh * 3 / 7.07) / 2 - 30px);height:48px;background:#333;border:2px solid #666;border-radius:8px;display:none;align-items:center;justify-content:center;color:#888;cursor:pointer;z-index:200;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0,0,0,0.3)}
.copy-button.show{display:flex}
.copy-button:hover{background:#444;border-color:#888;color:#aaa}
.copy-button.drag-over{background:#4CAF50;border-color:#66BB6A;color:white;transform:scale(1.1);box-shadow:0 0 20px rgba(76,175,80,0.5)}
.delete-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.8);display:flex;align-items:center;justify-content:center;z-index:2000}
.delete-modal-content{background:#333;border-radius:12px;padding:24px;max-width:400px;width:90%;text-align:center;box-shadow:0 8px 32px rgba(0,0,0,0.5)}
.delete-modal-content h3{color:#ff6b6b;margin-bottom:16px;font-size:20px}
.delete-modal-content p{color:#ccc;margin-bottom:24px;line-height:1.5}
.delete-modal-buttons{display:flex;gap:12px;justify-content:center}
.btn{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease}
.btn-danger{background:#ff4444;color:white}
.btn-danger:hover{background:#ff3333;transform:translateY(-1px)}
.btn-secondary{background:#666;color:white}
.btn-secondary:hover{background:#777;transform:translateY(-1px)}
.btn-primary{background:#4CAF50;color:white}
.btn-primary:hover{background:#45a049;transform:translateY(-1px)}
.card-editor-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:3000;overflow-y:auto;padding:20px}
.card-editor-content{background:#333;border-radius:12px;max-width:1400px;width:100%;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,0.5)}
.card-editor-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #555}
.card-editor-header h3{color:#fff;margin:0;font-size:20px}
.card-editor-body{flex:1;overflow-y:auto;padding:24px}
.card-editor-footer{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:20px 24px;border-top:1px solid #555;flex-wrap:wrap}
.footer-left{display:flex;align-items:center}
.footer-actions{display:flex;gap:12px;align-items:center}
.btn-ghost{background:transparent;color:#ccc;border:1px solid #555;border-radius:6px;padding:10px 20px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease}
.btn-ghost:hover{color:#fff;border-color:#4CAF50;box-shadow:0 0 0 2px rgba(76,175,80,0.2);transform:translateY(-1px)}
.instructions-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);display:none;align-items:center;justify-content:center;z-index:3500;padding:20px}
.instructions-content{background:#2a2a2a;border-radius:12px;max-width:640px;width:100%;box-shadow:0 12px 40px rgba(0,0,0,0.6);display:flex;flex-direction:column;max-height:90vh}
.instructions-header{display:flex;align-items:center;justify-content:center;padding:20px 24px;border-bottom:1px solid #555}
.instructions-header h3{margin:0;font-size:20px;color:#fff}
.instructions-body{padding:20px 24px;color:#ddd;overflow-y:auto;line-height:1.6}
.instructions-body ul{padding-left:20px;margin:12px 0}
.instructions-body li{margin-bottom:8px}
.instructions-footer{display:flex;justify-content:flex-end;padding:16px 24px;border-top:1px solid #555;gap:12px}
.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;height:100%}
.editor-preview{display:flex;flex-direction:column}
.preview-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.preview-header h4{color:#fff;margin:0;font-size:16px}
.preview-controls{display:flex;align-items:center;gap:12px}
.preview-controls label{color:#ccc;font-size:14px;display:flex;align-items:center;gap:6px}
.preview-container{flex:1;display:flex;justify-content:center;align-items:flex-start;background:#2a2a2a;border-radius:8px;padding:20px;overflow:auto}
.preview-container canvas{border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,0.3)}
.editor-controls{display:flex;flex-direction:column;gap:20px;overflow-y:auto}
.editor-section{background:#2a2a2a;border-radius:8px;padding:16px}
.editor-section h4{color:#fff;margin:0 0 16px 0;font-size:16px;border-bottom:1px solid #555;padding-bottom:8px}
.accordion-header{display:flex;justify-content:space-between;align-items:center;cursor:pointer;padding:12px 0;border-bottom:1px solid #555;transition:background-color 0.2s ease}
.accordion-header:hover{background-color:rgba(255,255,255,0.05)}
.accordion-header h4{margin:0;color:#fff;font-size:16px;border:none;padding:0}
.accordion-icon{color:#ccc;font-size:12px;transition:transform 0.2s ease}
.accordion:not(.collapsed) .accordion-icon{transform:rotate(90deg)}
.accordion-content{padding-top:16px;transition:max-height 0.3s ease,opacity 0.3s ease;overflow:hidden}
.accordion.collapsed .accordion-content{max-height:0;padding-top:0;opacity:0}
.accordion-subsection{margin-bottom:20px}
.accordion-subsection:last-child{margin-bottom:0}
.accordion-subsection h5{color:#ccc;margin:0 0 12px 0;font-size:14px;font-weight:500;text-transform:uppercase;letter-spacing:0.5px}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.form-group{display:flex;flex-direction:column;gap:6px}
.form-group label{color:#ccc;font-size:14px;font-weight:500}
.form-group input[type="range"]{width:100%;height:6px;background:#555;border-radius:3px;outline:none;-webkit-appearance:none}
.form-group input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;background:#4CAF50;border-radius:50%;cursor:pointer}
.form-group input[type="range"]::-moz-range-thumb{width:18px;height:18px;background:#4CAF50;border-radius:50%;cursor:pointer;border:none}
.form-group select,.form-group textarea{background:#444;border:1px solid #666;border-radius:6px;color:#fff;padding:8px 12px;font-size:14px;font-family:inherit}
.form-group select:focus,.form-group textarea:focus{outline:none;border-color:#4CAF50;box-shadow:0 0 0 2px rgba(76,175,80,0.2)}
.form-group textarea{resize:vertical;min-height:80px}
.form-group input[type="checkbox"]{width:16px;height:16px;accent-color:#4CAF50}
.position-display{background:#444;border:1px solid #666;border-radius:6px;color:#ccc;padding:8px 12px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-size:14px}
.code-editor{background:#1a1a1a;border:1px solid #666;border-radius:6px;color:#fff;padding:12px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-size:13px;line-height:1.4;white-space:pre-wrap;word-break:break-word;resize:vertical}
.code-editor:focus{outline:none;border-color:#4CAF50;box-shadow:0 0 0 2px rgba(76,175,80,0.2)}
.output-display{background:#2a2a2a;color:#ccc;cursor:default;min-height:100px}
.svg-preview{margin-top:12px;padding:16px;background:#1a1a1a;border:1px solid #666;border-radius:6px}
.svg-preview-content{background:linear-gradient(135deg,#f8f8f8 0%,#a0a0a0 100%);padding:20px;border-radius:4px;min-height:100px;display:flex;align-items:center;justify-content:center}
@media (max-width:1200px){.editor-grid{grid-template-columns:1fr;gap:16px}.preview-container{max-height:400px}}
@media (max-width:768px){.card-editor-content{margin:10px;max-height:95vh}.card-editor-header,.card-editor-body,.card-editor-footer{padding:16px}.form-grid{grid-template-columns:1fr;gap:12px}}
.highlightable:empty::before {
  content: attr(placeholder);
  color: #666;
  pointer-events: none;
}
.highlightable strong {
  font-weight: bold;
  color: inherit;
}
